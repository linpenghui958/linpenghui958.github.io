<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>林小辉的blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Just recrod something">
    
    <link rel="preload" href="/assets/css/0.styles.35bcedcf.css" as="style"><link rel="preload" href="/assets/js/app.5d71a1c6.js" as="script"><link rel="preload" href="/assets/js/2.c183a324.js" as="script"><link rel="preload" href="/assets/js/17.fa250f32.js" as="script"><link rel="prefetch" href="/assets/js/10.dcea7a3e.js"><link rel="prefetch" href="/assets/js/11.c7f66434.js"><link rel="prefetch" href="/assets/js/12.de03b6e0.js"><link rel="prefetch" href="/assets/js/13.d9910249.js"><link rel="prefetch" href="/assets/js/14.fafe36af.js"><link rel="prefetch" href="/assets/js/15.03949b40.js"><link rel="prefetch" href="/assets/js/16.05df2604.js"><link rel="prefetch" href="/assets/js/18.a5e0229d.js"><link rel="prefetch" href="/assets/js/19.4183787b.js"><link rel="prefetch" href="/assets/js/20.90ed0136.js"><link rel="prefetch" href="/assets/js/21.cd3b3939.js"><link rel="prefetch" href="/assets/js/22.3050d27e.js"><link rel="prefetch" href="/assets/js/23.d2874efe.js"><link rel="prefetch" href="/assets/js/24.79cca016.js"><link rel="prefetch" href="/assets/js/25.9c5b0a09.js"><link rel="prefetch" href="/assets/js/26.69d37c61.js"><link rel="prefetch" href="/assets/js/27.c6142c6d.js"><link rel="prefetch" href="/assets/js/3.e88f59e6.js"><link rel="prefetch" href="/assets/js/4.24aaf822.js"><link rel="prefetch" href="/assets/js/5.0f611b7f.js"><link rel="prefetch" href="/assets/js/6.148a2419.js"><link rel="prefetch" href="/assets/js/7.1ab69c09.js"><link rel="prefetch" href="/assets/js/8.c66ae691.js"><link rel="prefetch" href="/assets/js/9.4438a384.js">
    <link rel="stylesheet" href="/assets/css/0.styles.35bcedcf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">林小辉的blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://www.zhihu.com/column/linxiaohui" target="_blank" rel="noopener noreferrer" class="nav-link external">
  知乎
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="https://github.com/linpenghui958" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://www.zhihu.com/column/linxiaohui" target="_blank" rel="noopener noreferrer" class="nav-link external">
  知乎
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="https://github.com/linpenghui958" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Flutter相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue2.0</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>面试</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/interview/2019面试.html" class="active sidebar-link">/interview/2019面试.html</a></li><li><a href="/interview/2019前端性能优化.html" class="sidebar-link">2019前端性能优化 一</a></li><li><a href="/interview/手写js.html" class="sidebar-link">/interview/手写js.html</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>其他</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>金三银四的季节又来了，笔者一直在武汉工作，年前裸辞后，过完年一共面了接近两个星期，有阿里，腾讯，金山，万科，趣头条等公司，在武汉拿到了4个offer(金山、万科、航班管家、财人汇)后，又在深圳一站式面了腾讯，最终选择了腾讯，这里不完全记录一点面试中遇到的问题</p> <h3 id="面试不完全汇总"><a href="#面试不完全汇总" class="header-anchor">#</a> 面试不完全汇总</h3> <p>float和flex的区别
为什么会有flex
了解CI CD吗
React和Vue的差异
移动端高清问题
移动端点击穿透问题
Nodejs的模块化和ES6的模块化区别
http的优缺点
restful和graphQL优缺点，对比
事件委托的优缺点
何时需要用到border-box
csrf是什么，如何用预防
fastclik的作用
前端性能优化
CSS居中+等比宽高问题
margin-top/margin-bottom百分数问题
TCP和UDP区别</p> <h4 id="float和flex的区别"><a href="#float和flex的区别" class="header-anchor">#</a> float和flex的区别</h4> <p><strong>float</strong>
脱离文档流
布局的传统解决方案，基于盒状模型，依赖 display 属性 + position属性 + float属性。它对于那些特殊布局非常不方便，比如，垂直居中就不容易实现。
缺点：</p> <ul><li>容错性差，耦合度高，其中一个浮动元素出现问题，其他也会受影响</li> <li>必须要有固定的布局</li> <li>低版本IE不兼容</li></ul> <p><strong>flex</strong>
W3C 提出了一种新的方案----Flex 布局，可以简便、完整、响应式地实现各种页面布局
flex性能改进在于，</p> <ul><li>相比传统margin，可伸缩性强（不算性能）</li> <li>相比float，关联性重绘好很多</li> <li>相比tranform，子元素和父元素样式控制操作更少</li></ul> <p>RESTful优缺点
特点：充分利用 HTTP 协议本身语义。
无状态，这点非常重要。在调用一个接口（访问、操作资源）的时候，可以不用考虑上下文，不用考虑当前状态，极大的降低了复杂度。
HTTP 本身提供了丰富的内容协商手段，无论是缓存，还是资源修改的乐观并发控制，都可以以业务无关的中间件来实现。</p> <h4 id="react和vue的差异"><a href="#react和vue的差异" class="header-anchor">#</a> React和Vue的差异</h4> <p>相似处
Virtual DOM、组件化、Props
差异</p> <ol><li>渲染优化，是否需要用shouldComponentUpdate，PureComponent</li> <li>JSX 和 Template ， CSS in JS</li> <li>Vue-cli 和 create-react-app</li> <li>学习难度，学 React 前，你需要知道 JSX 和 ES2015</li></ol> <h4 id="移动端高清问题"><a href="#移动端高清问题" class="header-anchor">#</a> 移动端高清问题</h4> <ul><li>DPR （device pixel ratio）= device pixel（设备像素） \  CSS pixel（css像素）</li> <li>1px解决方案</li></ul> <blockquote><ul><li>border-image 、 background-image 缺点：修改颜色麻烦，圆角需要特殊处理</li> <li>box-shadow  缺点：在Safari下不支持小数设置</li> <li>伪类 + transform</li> <li>SVG</li> <li>viewport + rem</li></ul></blockquote> <h4 id="移动端点击穿透问题"><a href="#移动端点击穿透问题" class="header-anchor">#</a> 移动端点击穿透问题</h4> <p>场景：上层元素A绑定了tap事件，下层元素B绑定了click事件。当我们点击A时，A元素隐藏，此时也会触发下层B元素的click事件。
原因就是当上层A的tap事件发生后，其实是touchend结束后，会触发click事件，因为这几个事件的触发顺序是touchstart-touchmove-touchend-click。因此当click事件触发300ms后，上面的A元素已经消失，此时真正点击的就相当于下层的B元素，因此会发生点击穿透事件。
<strong>解决方案</strong></p> <ul><li>都使用click或者tap</li> <li>在click事件触发前阻止，在touchend事件中使用e.preventDefault()</li> <li>使用fast-click。fastclick是一个专门解决300ms点击延迟的库。</li></ul> <p><strong>FastClick实现原理</strong>
在document.body绑定touchstart和touchend事件
<code>touchstart</code>
用于记录当前点击的元素的targetElement
<code>touchend</code></p> <ul><li>阻止默认事件（屏蔽之后的click事件）</li> <li>合成click事件，并添加可跟踪属性forwardedTouchEvent</li> <li>在targetElement上触发click事件</li> <li>targetElement上绑定的事件立即执行，完成FastClick</li></ul> <h4 id="commonjs的模块化和es6的模块化区别"><a href="#commonjs的模块化和es6的模块化区别" class="header-anchor">#</a> CommonJS的模块化和ES6的模块化区别</h4> <p>CommonJS主要依赖module、exports、require、global这几个环境变量。
CommonJS用同步方式加载模块。
ES6 module的模块不是对象，<code>import</code>命令会被JS引擎动态分析，在编译时就引入模块代码，而不是在代码运行时加载，所以无法实现条件加载。(ps: 也正是因为这个，使得静态分析成为可能)
<strong>差异</strong></p> <ol><li>CommonJS模块输出的是一个值的拷贝，ES6模块输出的是值的引用</li></ol> <ul><li>CommonJS模块输出值的拷贝，一旦输出一个值，模块内部的变化就影响不到这个值。</li> <li>ES6模块的运行机制与CommonJS不一样。JS引擎对脚本静态分析的时候，遇到模块加载命令<code>import</code>，就会生产一个只读引用。等到脚本真正执行时，再根据只读引用，到被加载的模块中取值。原始值变了，<code>import</code>加载的值也会跟着变。因此ES6模块是动态引用，并且不会缓存值，模块里的变量绑定其所在的模块。</li></ul> <ol start="2"><li>CommonJS模块是运行时加载，ES6模块是编译时输出接口</li></ol> <ul><li>运行时加载：CommonJS模块就是对象，即在输入时先加载整个模块，生产一个对象，然后再从这个对象上面读取方法，这种加载成为”运行时加载“</li> <li>编译时加载：ES6模块不是对象，而是通过<code>export</code>命令显示指定输出的代码，<code>import</code>时采用静态命令的形式。即在<code>import</code>时可以指定加载某个输出值，而不是加载整个模块，这种加载成为<strong>编译时加载</strong>
CommonJS 加载的是一个对象（即module.exports属性），该对象只有在脚本运行完才会生成。而 ES6 模块不是对象，它的对外接口只是一种静态定义，在代码静态解析阶段就会生成。</li></ul> <h4 id="restful优缺点"><a href="#restful优缺点" class="header-anchor">#</a> RESTful优缺点</h4> <p><strong>优点：</strong></p> <ol><li>轻量，直接基于http，不需要任何别的消息协议。get/post/put/delete为CURD操作</li> <li>面向资源，一目了然，具有自解释性</li> <li>数据描述简单，一般是xml，json做数据交换</li></ol> <p><strong>缺点：</strong>
一个适用于简单操作的接口规范，复杂操作并不适用，适合CRUD并且只适合CRUD，有的浏览器可能不支持POST、GET以外的操作，要特殊处理。
ps: 多个接口，更新订单收款状态、更新订单支付状态、更新订单结算状态。批量操作，get超出长度</p> <ol><li>客户端-服务器：提供服务的服务器和使用服务的客户端分离解耦</li></ol> <blockquote><ul><li>提高客户端的便捷性（操作简单）</li> <li>简化服务器提高可伸缩性（高性能、低成本）</li> <li>允许客户端服务端分组优化不受影响</li></ul></blockquote> <ol start="2"><li>无状态：来自客户的每一个请求必须包含服务器处理该请求所需的所有信息（请求信息唯一性）</li></ol> <blockquote><ul><li>提高了可见性（可以考虑每个请求）</li> <li>提高了可靠性（更容易故障恢复）</li> <li>提高了可扩展性（降低了服务器资源使用）</li></ul></blockquote> <ol start="3"><li>可缓存：服务器必须让客户端知道请求是否可以被缓存？如果可以，客户端可以重用之前的请求信息发送请求</li></ol> <blockquote><ul><li>减少交互连接数</li> <li>减少链接过程的网络延迟</li></ul></blockquote> <ol start="4"><li>分层系统：允许服务器和客户端之前的中间层（代理，网关等）代替服务器对客户端的请求进行回应，而客户端不需要关心与它交互的组件之外的事情</li></ol> <blockquote><ul><li>提高了系统的可扩展性</li> <li>简化了系统的复杂性</li></ul></blockquote> <ol start="5"><li>统一接口：客户和服务器之前通信的方法必须是统一的。</li></ol> <blockquote><p>提高交互的可见性
鼓励单独优化改善组件</p></blockquote> <ol start="6"><li>支持按需代码：服务器可以提供一些代码或者脚本并在客户的运行环境中执行</li></ol> <blockquote><ul><li>提高了可扩展性</li></ul></blockquote> <h4 id="事件委托的优缺点"><a href="#事件委托的优缺点" class="header-anchor">#</a> 事件委托的优缺点</h4> <p>优点：</p> <ol><li>节省内存，减少事件注册。</li> <li>适合动态内容</li></ol> <p>确定：</p> <ol><li>如果把所有事件都是用事件代理，可能会出现误判。即本不该被触发的事件被绑定上了事件。</li> <li>基于冒泡，对于不冒泡的事件不支持。</li> <li>层次过多时，可能会被某曾组织掉。</li></ol> <h4 id="csrf"><a href="#csrf" class="header-anchor">#</a> CSRF</h4> <p>特点</p> <ul><li>CSRF通常发生在第三方域名</li> <li>CSRF攻击者不能获取到Cookie等信息，只是使用。</li></ul> <p>防御策略</p> <ul><li><p>阻止不明外域的访问</p> <ul><li>同源监测</li> <li>Samesite cookie</li></ul></li> <li><p>提交时要求附加本域下才能获取的信息</p> <ul><li>CSRF TOken</li> <li>双重Cookie验证</li> <li>提交验证码</li></ul></li></ul> <h4 id="为什么用transform居中而不是marginleft-top"><a href="#为什么用transform居中而不是marginleft-top" class="header-anchor">#</a> 为什么用transform居中而不是marginLeft/Top</h4> <p>浏览器渲染过程</p> <blockquote><p>解析DOM Tree，创建一个或多个渲染层（layer）
将每个层独立的绘进位图中（计算样式-&gt;布局-&gt;栅格化）
将层作为纹理（texture）上传至GPU
复合（composite）多个层来生成最终的屏幕图像
每个层的样式出现调整后，要重新计算样式-&gt;重新布局-&gt;重新栅格化-&gt;重新组合</p></blockquote> <p>使用top/left只会创建一个层，而是用transform会使浏览器将元素单独提取放在GPU单独的渲染层中，这样有<strong>三点好处</strong>：</p> <ol><li>该元素任何合成属性（Composite Property）的变化将不会影响原有文档，不会导致文档被重新布局（重绘、回流）</li> <li>该层将由GPU负责渲染，从而节省CPU资源，不会阻塞主线程JS代码的执行</li> <li>动画更为平顺，这是因为使用transform可以小于像素的单位进行绘制
可能带来的负作用是额外的渲染层导致<strong>更多的线程间通信</strong>，如果过度使用，导致生成成百上千的渲染层，那反而会导致<strong>组合各层图像的成本</strong>迅速上升成为主要矛盾，且我们需要记住GPU也是有内存限制的。</li></ol> <h4 id="使用css设置rem"><a href="#使用css设置rem" class="header-anchor">#</a> 使用css设置rem</h4> <p>使用calc(100vw / 屏幕宽度)</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>   <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">!</span><span class="token punctuation">[</span><span class="token punctuation">]</span> 这个要牵涉到 JavaScript 中不同类型 <span class="token operator">==</span> 比较的规则<span class="token punctuation">,</span> 具体是由相关标准定义的<span class="token punctuation">.</span> <span class="token operator">!</span><span class="token punctuation">[</span><span class="token punctuation">]</span> 的值是 <span class="token boolean">false</span><span class="token punctuation">,</span> 此时表达式变为 <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">,</span> 参照标准<span class="token punctuation">,</span> 该比较变成了 <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token function">ToNumber</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 即 <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0.</span> 这个时候又变成了 <span class="token function">ToPrimitive</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">,</span> 即 <span class="token string">''</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">,</span> 接下来就是比较 <span class="token function">ToNumber</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">,</span> 也就是 <span class="token number">0</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">,</span> 最终结果为 <span class="token boolean">true</span><span class="token punctuation">.</span>
</code></pre></div><h3 id="css居中-宽高等比变化"><a href="#css居中-宽高等比变化" class="header-anchor">#</a> CSS居中 + 宽高等比变化</h3> <hr> <ol><li>font-size em-square</li> <li>line-height 实际占地高度</li> <li>100px 100px -&gt;  103px</li> <li>vertical  top  middle  bottom  text-top  text-bottom</li> <li>图片下面有空隙</li> <li>vertical-align top</li> <li>img{display: block}</li> <li>font-size 0 傻逼才用</li> <li>inline-block 元素对不齐  无解   用  flex或float</li> <li>inline-block  有空隙  用  flex 或 float</li></ol> <h5 id="css垂直居中对齐"><a href="#css垂直居中对齐" class="header-anchor">#</a> css垂直居中对齐</h5> <div class="language- extra-class"><pre><code>&lt;main&gt;
  &lt;span&gt;Center me, please!&lt;/span&gt;
&lt;/main&gt;
</code></pre></div><ol><li>display: flex + margin: auto</li></ol> <div class="language-css extra-class"><pre class="language-css"><code>	<span class="token selector">main</span><span class="token punctuation">{</span>
		<span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
		<span class="token property">min-height</span><span class="token punctuation">:</span> 152px<span class="token punctuation">;</span>
		<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token selector">main &gt; span</span> <span class="token punctuation">{</span>
		<span class="token property">margin</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>display: flex , grid</li></ol> <div class="language-css extra-class"><pre class="language-css"><code> <span class="token selector">main</span><span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">min-height</span><span class="token punctuation">:</span> 152px<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">main &gt; span</span> <span class="token punctuation">{</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #b4a078<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> .3em 1em .5em<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 3px<span class="token punctuation">;</span>
    <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 .5em #b4a078<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>position: absolute + calc()</li></ol> <div class="language-css extra-class"><pre class="language-css"><code>  <span class="token selector">main</span><span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">min-height</span><span class="token punctuation">:</span> 152px<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">main &gt; span</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>50% - 16px<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token property">left</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>50% - 72px<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><ol start="4"><li>position: absolute + translate</li></ol> <div class="language-css extra-class"><pre class="language-css"><code>  <span class="token selector">main</span><span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">min-height</span><span class="token punctuation">:</span> 152px<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">main &gt; span</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span> <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span> -50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
		  <span class="token selector">```
5. display: table / table-cell + vertical-align: middle
```css
  main</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 152px<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> table<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">main &gt; div</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> table-cell<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><ol start="6"><li>伪元素 :after + vertical-align: middle</li></ol> <div class="language-css extra-class"><pre class="language-css"><code>  <span class="token selector">main</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 152px<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">main::after</span> <span class="token punctuation">{</span>
    <span class="token property">content</span><span class="token punctuation">:</span><span class="token string">''</span><span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><h4 id="宽高等比用css如何实现"><a href="#宽高等比用css如何实现" class="header-anchor">#</a> 宽高等比用css如何实现</h4> <ol><li>使用隐藏图片
完美兼容PC端、移动端
如果div容器不给高度，它的高度会随容器内部元素的变化而撑大
在容器内添加一张等比宽高的图片，给图片设置宽度100% 高度auto</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>
	 #container <span class="token punctuation">{</span>
	   width<span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
	 <span class="token punctuation">}</span>
	 <span class="token punctuation">.</span>attr <span class="token punctuation">{</span>
	   background<span class="token operator">-</span>color<span class="token operator">:</span> #<span class="token number">008</span>b57<span class="token punctuation">;</span>
	 <span class="token punctuation">}</span>
	 <span class="token punctuation">.</span>attr img<span class="token punctuation">{</span>
	   width<span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
	   height<span class="token operator">:</span> auto<span class="token punctuation">;</span>
	 <span class="token punctuation">}</span>
	 <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">'container'</span><span class="token operator">&gt;</span>
	  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">'attr'</span><span class="token operator">&gt;</span>
	    <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">&quot;1.png&quot;</span> alt<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">&gt;</span>
	  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre></div><p>还可以用base64优化</p> <ol start="2"><li>使用vmin
将父容器的宽度和高度定义为相同vmin，这样父容器宽高就是相同值，然后给子容器宽高设置百分比</li></ol> <ul><li>vw 相对于视窗的宽度</li> <li>vh 相对于视窗的高度</li> <li>vmin 相对于视口的宽度或高度中较小的那个被均分为100单位的vmin</li> <li>vmax 相对于视口的宽度或高度中较大的那个被均分为100单位的vmax</li></ul> <div class="language-css extra-class"><pre class="language-css"><code>  <span class="token selector">#container</span><span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100vmin<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100vmin<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token selector">.attr</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> orange<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>使用scale</li></ol> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.attr</span><span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span>50%<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="4"><li>padding-top/padding-bottom 实现
因为padding-bottom的属性值百分比是按照父容器的宽度来计算。</li></ol> <div class="language-css extra-class"><pre class="language-css"><code>	<span class="token selector">&lt;style type=&quot;text/css&quot;&gt;
	#container</span> <span class="token punctuation">{</span>
	    <span class="token property">width</span><span class="token punctuation">:</span> 80%<span class="token punctuation">;</span>
	    <span class="token property">height</span><span class="token punctuation">:</span> 500px<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token selector">.attr</span> <span class="token punctuation">{</span>
	    <span class="token property">width</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
	    <span class="token property">height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
	    <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
	    <span class="token property">background-color</span><span class="token punctuation">:</span> #008b57<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	&lt;/style&gt;
	
	&lt;div id=<span class="token string">'container'</span>&gt;
	    &lt;div class=<span class="token string">'attr'</span>&gt;&lt;/div&gt;
	&lt;/div&gt;
</code></pre></div><h4 id="为什么margin-top-margin-bottom的百分数也是相对于width而不是height呢"><a href="#为什么margin-top-margin-bottom的百分数也是相对于width而不是height呢" class="header-anchor">#</a> 为什么margin-top/margin-bottom的百分数也是相对于width而不是height呢？</h4> <p>CSS权威指南中的解释：</p> <p>我们认为，正常流中的大多数元素都会足够高以包含其后代元素（包括外边距），如果一个元素的上下外边距时父元素的height的百分数，就可能导致一个无限循环，父元素的height会增加，以适应后代元素上下外边距的增加，而相应的，上下外边距因为父元素height的增加也会增加，如果循环。</p> <p>###UDP和TCP</p> <h4 id="udp"><a href="#udp" class="header-anchor">#</a> UDP</h4> <p>简介：UDP是面向无连接的，UDP只是数据报文的搬运工，不保证有序且不丢失的传递，UDP协议没有控制流量算法，相比TCP更加轻量</p> <h4 id="面向无连接"><a href="#面向无连接" class="header-anchor">#</a> 面向无连接</h4> <p>UDP不需要和TCP一样在发送数据前进行三次握手建立连接。
并且只是数据报文的搬运工，不会对数据报文进行任何拆分和拼接。
具体来说：</p> <ul><li>在发送端，应用层的数据 -&gt; 传输层UDP协议，UDP只会给数据增加一个UDP头标识</li> <li>在接收端，网络层将数据传给传输层，UDP也只去除IP报文头，就传给应用层</li></ul> <h4 id="不可靠性"><a href="#不可靠性" class="header-anchor">#</a> 不可靠性</h4> <p>首先不可靠性体现在无连接上，通信都不需要建立连接，想发就发，这样的情况肯定不可靠。
网络不佳的情况下，UDP因为没有拥塞控制，一直会以恒定的速度发送数据。<strong>弊端</strong>就是网络不好会丢包，<strong>优点</strong>就是在某些时效性要求高的场景适合。</p> <h4 id="高效"><a href="#高效" class="header-anchor">#</a> 高效</h4> <p>UDP的头部开销小，只有八个字节（TCP至少二十字节）
UDP头部包含以下几个数据：</p> <ul><li>两个十六位端口号，分别为源端口和目标端口</li> <li>整个数据报文的长度</li> <li>整个数据报文的检验</li></ul> <h4 id="传输方式"><a href="#传输方式" class="header-anchor">#</a> 传输方式</h4> <p>UDP支持一对一，一对多，多对多，多对一，也就是单播，多播，广播</p> <h4 id="适用场景"><a href="#适用场景" class="header-anchor">#</a> 适用场景</h4> <ul><li>直播</li> <li>游戏</li></ul> <h3 id="tcp"><a href="#tcp" class="header-anchor">#</a> TCP</h3> <p>建立和断开连接都要进行握手。在传输过程中，通过各种算法保证数据的可靠性。
相对UDP来说不那么的高效。</p> <h4 id="头部"><a href="#头部" class="header-anchor">#</a> 头部</h4> <ul><li>Sequence number，这个序号保证了TCP传输的报文是有序的，对端可以通过序号顺序拼接报文</li> <li>Acknowledgement number，这个序号表示数据接收端  期望接受的下一个字节的编号是多少，同时也表示上一个序号的数据已经收到</li> <li>Window Size，窗口大小，表示还能接受多少字节的数据，用于流量控制
<ul><li>标识符</li></ul></li></ul> <h4 id="状态机"><a href="#状态机" class="header-anchor">#</a> 状态机</h4> <ul><li>建立连接三次握手
不管是客户端还是服务端，TCP 连接建立完后都能发送和接收数据，所以 TCP 是一个全双工的协议。</li></ul> <h5 id="第一次握手"><a href="#第一次握手" class="header-anchor">#</a> 第一次握手</h5> <p>客户端向服务端发送连接请求报文段。该报文段中包含自身的数据通讯初始序号。请求发送后，客户端便进入 SYN-SENT 状态。</p> <h5 id="第二次握手"><a href="#第二次握手" class="header-anchor">#</a> 第二次握手</h5> <p>服务端收到连接请求报文段后，如果同意连接，则会发送一个应答，该应答中也会包含自身的数据通讯初始序列号，发送完成后便进入SYN-RECEIVED状态。</p> <h5 id="第三次握手"><a href="#第三次握手" class="header-anchor">#</a> 第三次握手</h5> <p>当客户端收到连接同意的应答后，还要向服务端发送一个确认报文。
客户端发完这个报文段便进入ESTABLISHED状态。
服务端发完这个应答后也会进入ESTABLISHED状态。</p> <p>ps: 为什么 TCP 建立连接需要三次握手，明明两次就可以建立起连接
因为这是为了防止出现失效的连接请求报文段被服务端接收的情况，从而产生错误。</p> <h4 id="断开连接四次握手"><a href="#断开连接四次握手" class="header-anchor">#</a> 断开连接四次握手</h4> <ul><li>第一次握手
若客户端 A 认为数据发送完成，则它需要向服务端 B 发送连接释放请求。</li> <li>第二次握手
B 收到连接释放请求后，会告诉应用层要释放 TCP 链接。然后会发送 ACK 包，并进入 CLOSE_WAIT 状态，此时表明 A 到 B 的连接已经释放，不再接收 A 发的数据了。但是因为 TCP 连接是双向的，所以 B 仍旧可以发送数据给 A。</li> <li>第三次握手
B 如果此时还有没发完的数据会继续发送，完毕后会向 A 发送连接释放请求，然后 B 便进入 LAST-ACK 状态。</li> <li>第四次握手
A 收到释放请求后，向 B 发送确认应答，此时 A 进入 TIME-WAIT 状态。该状态会持续 2MSL（最大段生存期，指报文段在网络中生存的时间，超时会被抛弃） 时间，若该时间段内没有 B 的重发请求的话，就进入 CLOSED 状态。当 B 收到确认应答后，也便进入 CLOSED 状态。
ps: <strong>2MSL</strong> 为了保证 B 能收到 A 的确认应答。若 A 发完确认应答后直接进入 CLOSED 状态，如果确认应答因为网络问题一直没有到达，那么会造成 B 不能正常关闭。</li></ul> <h4 id="arq协议"><a href="#arq协议" class="header-anchor">#</a> ARQ协议</h4> <p>ARQ协议就是超时重传机制。通过确认和超时机制保证数据的正确送达。
ARQ协议包含<strong>停止等待ARQ</strong>和<strong>连续ARQ</strong>两种协议。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vue/Vue+TypeScript爬坑指南.html" class="prev">
        Vue + TypeScript踩坑(初始化项目)
      </a></span> <span class="next"><a href="/interview/2019前端性能优化.html">
        2019前端性能优化 一
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5d71a1c6.js" defer></script><script src="/assets/js/2.c183a324.js" defer></script><script src="/assets/js/17.fa250f32.js" defer></script>
  </body>
</html>
