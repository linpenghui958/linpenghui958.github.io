<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>林小辉的blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Just recrod something">
    
    <link rel="preload" href="/assets/css/0.styles.35bcedcf.css" as="style"><link rel="preload" href="/assets/js/app.5d71a1c6.js" as="script"><link rel="preload" href="/assets/js/2.c183a324.js" as="script"><link rel="preload" href="/assets/js/26.69d37c61.js" as="script"><link rel="prefetch" href="/assets/js/10.dcea7a3e.js"><link rel="prefetch" href="/assets/js/11.c7f66434.js"><link rel="prefetch" href="/assets/js/12.de03b6e0.js"><link rel="prefetch" href="/assets/js/13.d9910249.js"><link rel="prefetch" href="/assets/js/14.fafe36af.js"><link rel="prefetch" href="/assets/js/15.03949b40.js"><link rel="prefetch" href="/assets/js/16.05df2604.js"><link rel="prefetch" href="/assets/js/17.fa250f32.js"><link rel="prefetch" href="/assets/js/18.a5e0229d.js"><link rel="prefetch" href="/assets/js/19.4183787b.js"><link rel="prefetch" href="/assets/js/20.90ed0136.js"><link rel="prefetch" href="/assets/js/21.cd3b3939.js"><link rel="prefetch" href="/assets/js/22.3050d27e.js"><link rel="prefetch" href="/assets/js/23.d2874efe.js"><link rel="prefetch" href="/assets/js/24.79cca016.js"><link rel="prefetch" href="/assets/js/25.9c5b0a09.js"><link rel="prefetch" href="/assets/js/27.c6142c6d.js"><link rel="prefetch" href="/assets/js/3.e88f59e6.js"><link rel="prefetch" href="/assets/js/4.24aaf822.js"><link rel="prefetch" href="/assets/js/5.0f611b7f.js"><link rel="prefetch" href="/assets/js/6.148a2419.js"><link rel="prefetch" href="/assets/js/7.1ab69c09.js"><link rel="prefetch" href="/assets/js/8.c66ae691.js"><link rel="prefetch" href="/assets/js/9.4438a384.js">
    <link rel="stylesheet" href="/assets/css/0.styles.35bcedcf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">林小辉的blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://www.zhihu.com/column/linxiaohui" target="_blank" rel="noopener noreferrer" class="nav-link external">
  知乎
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="https://github.com/linpenghui958" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://www.zhihu.com/column/linxiaohui" target="_blank" rel="noopener noreferrer" class="nav-link external">
  知乎
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="https://github.com/linpenghui958" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Flutter相关</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/flutter/Flutter零基础介绍.html" class="sidebar-link">Flutter介绍</a></li><li><a href="/flutter/Futter插件管理之Pigeon.html" class="sidebar-link">/flutter/Futter插件管理之Pigeon.html</a></li><li><a href="/flutter/Flutter FPS 监控.html" class="sidebar-link">如何获取Flutter APP的FPS</a></li><li><a href="/flutter/本地编译FlutterEngine.html" class="sidebar-link">本地编译FlutterEngine</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue2.0</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>面试</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>其他</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="基于vue-cli实现自动生成skeleton-page-多页skeleton"><a href="#基于vue-cli实现自动生成skeleton-page-多页skeleton" class="header-anchor">#</a> ###基于vue-cli实现自动生成Skeleton Page，多页skeleton</h2> <p>11月15号更新：
简单粗暴，先上 最新demo地址（有帮助的同学可以点个赞，或者给个star <em>(:з」∠)</em> ）
<a href="https://github.com/linpenghui958/skeleton-test" target="_blank" rel="noopener noreferrer">vue-skeleton demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>文章发布过去半年时间，文章中所提的两个插件都已经进行较大的更新，有朋友跟我咨询后续插件的支持情况。这里我再以page-skeleton-webpack-plugin(0.10.12)以下简称PSWP为例进行实验
可以看到PSWP<a href="https://github.com/ElemeFE/page-skeleton-webpack-plugin/blob/master/docs/i18n/zh_cn.md" target="_blank" rel="noopener noreferrer">文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中已经更新了对多页自动生成，和多路由骨架屏的支持。
下文还是以vue-cli为例
第一步，新建一个项目，并安装相关依赖</p> <div class="language- extra-class"><pre class="language-text"><code>	vue init webpack skeleton-test
	cd skeleton-test
	npm install
	npm install --save-dev page-skeleton-webpack-plugin
	npm install --save-dev html-webpack-plugin
</code></pre></div><p>第二步，然后在build/webpack.base.conf.js中</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> SkeletonPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'page-skeleton-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> webpackConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token string">'index.js'</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> __dirname <span class="token operator">+</span> <span class="token string">'/dist'</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">'index.bundle.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugin<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
       <span class="token comment">// 本身的配置项</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">SkeletonPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      pathname<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../shell'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// customPath为来存储 shell 文件的地址</span>
      staticDir<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 最好和 `output.path` 相同</span>
      routes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token string">'/test'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 将需要生成骨架屏的路由添加到数组中，测试根路径和/test路径</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>第三步，运行项目，生产skeleton-page</p> <ul><li>还是在控制台输入toggleBar后点击页面上方的control bar唤醒
<img src="http://pi82b6lei.bkt.clouddn.com/111.png" alt="">
右上角依次为，预览不同路由生产的骨架屏，手机预览，写入本地文件
可以看到现在更新了许多功能，在预览无误后
点击右上方写入本地文件即可进行最后的打包预览
<img src="http://pi82b6lei.bkt.clouddn.com/222.png" alt="">
可以看到项目目录多了一个shell路径，这跟之前设置的保存路径一致</li></ul> <p>第四步，打包预览效果</p> <div class="language-js extra-class"><pre class="language-js"><code>	npm run build
	cd dist
	http<span class="token operator">-</span>server
</code></pre></div><p><img src="http://pi82b6lei.bkt.clouddn.com/skeleton11-15-3.png" alt="">
然后进入浏览器预览
看一下根路径
<img src="http://pi82b6lei.bkt.clouddn.com/screen12.gif" alt="">
看一下/test路径
<img src="http://pi82b6lei.bkt.clouddn.com/skeleton-screen13.gif" alt=""></p> <p>ps！！！前方高能预警
这里是以vue-cli为基础进行的测试
在初始化的模板中，webpack分为base、dev、 prod三个文件
这里因为PSWP为dev和prod都需要的插件，所以放在base文件中
但是在第一次打包后预览，笔者发现prod环境并没有生效
原因是在webpack.prod.conf.js中的HtmlWebpackPlugin配置中</p> <div class="language-js extra-class"><pre class="language-js"><code>plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
	<span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	  filename<span class="token operator">:</span> config<span class="token punctuation">.</span>build<span class="token punctuation">.</span>index<span class="token punctuation">,</span>
	  template<span class="token operator">:</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span>
	  inject<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
	  minify<span class="token operator">:</span> <span class="token punctuation">{</span>
	    <span class="token comment">// removeComments: true,  移除注释</span>
	    collapseWhitespace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
	    removeAttributeQuotes<span class="token operator">:</span> <span class="token boolean">true</span>
	    <span class="token comment">// more options:</span>
	    <span class="token comment">// https://github.com/kangax/html-minifier#options-quick-reference</span>
	  <span class="token punctuation">}</span><span class="token punctuation">,</span>
	  <span class="token comment">// necessary to consistently work with multiple chunks via CommonsChunkPlugin</span>
	  chunksSortMode<span class="token operator">:</span> <span class="token string">'dependency'</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><p>这里有一项minify的配置为移除注释，查看minify的<a href="https://github.com/kangax/html-minifier#options-quick-reference" target="_blank" rel="noopener noreferrer">文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <img src="http://pi82b6lei.bkt.clouddn.com/skeleton11-15-4.png" alt="">
笔者觉得很有可能是这个配置，移除了index.html中的给移除了，导致打包后未能生效。
在注释掉这一选项后，dev和prod环境均正常</p> <h2 id="以下为原内容"><a href="#以下为原内容" class="header-anchor">#</a> 以下为原内容</h2> <p>之前看eleme的专栏了解到骨架页面
这里刚好项目重构尝试将Skeleton Page引入项目中
其中遇到一些问题和一些坑，分享一下</p> <p>首先用到的是<a href="https://github.com/ElemeFE/page-skeleton-webpack-plugin" title="page-skeleton-webpack-plugin" target="_blank" rel="noopener noreferrer">page-skeleton-webpack-plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
eleme开源的一款自动生成skeleton-page的插件
使用起来也是非常的简单粗暴
<br>
项目是基于vue-cli + ts</p> <h4 id="page-skeleton-webpack-plugin使用"><a href="#page-skeleton-webpack-plugin使用" class="header-anchor">#</a> page-skeleton-webpack-plugin使用</h4> <p>首先通过npm安装插件，该插件依赖于<a href="https://github.com/jantimon/html-webpack-plugin" target="_blank" rel="noopener noreferrer">html-webpack-plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <blockquote><p>npm install --save-dev page-skeleton-webpack-plugin
npm install --save-dev html-webpack-plugin</p></blockquote> <ul><li>配置篇
首先，因为dev和prod环境都需要用到这个插件，可以直接在webpack.base.conf.js中的config中添加对应的plugins</li></ul> <ol><li><p>第一步</p> <div class="language- extra-class"><pre><code> // 引入插件
 const { SkeletonPlugin } = require('page-skeleton-webpack-plugin')
 
 //...其他配置
 module.exports = {
   context: path.resolve(__dirname, '../'),
   entry: {
     app: './src/main.ts'
   },
   output: { //...
   },
   resolve: { //...
   },
   module: { //...
   },
   node: { // ...
   },
   plugins: [
     new SkeletonPlugin({
       pathname: path.resolve(__dirname, '../static'), // 生成名为 shell 文件存放地址
       headless: false // 打开非headless chrome
     })
   ]
 }
</code></pre></div></li> <li><p>第二步
在index.html里面添加skeleton-page要注入的地方</p> <div class="language- extra-class"><pre><code> &lt;!DOCTYPE html&gt;
 &lt;html lang=&quot;en&quot;&gt;
 &lt;head&gt;
   &lt;meta charset=&quot;UTF-8&quot;&gt;
   &lt;title&gt;Document&lt;/title&gt;
 &lt;/head&gt;
 &lt;body&gt;
   &lt;div id=&quot;app&quot;&gt;
     &lt;!-- shell --&gt;   // 在#app里添加
   &lt;/div&gt;
 &lt;/body&gt;
 &lt;/html&gt;
</code></pre></div></li></ol> <p>配置就这样完成了，是不是很简单粗暴，使用起来也是很简单</p> <ul><li>使用篇
在chrome中运行项目后
1.使用Ctrl|Cmd + enter 呼出插件交互界面后者在控制台输入toggelBar呼出交互界面
<img src="https://i.imgur.com/kt3aPmW.png" alt="">
2.点击上放的按钮
<img src="https://i.imgur.com/wFZ9uxd.png" alt="">
点击写入，即可看到生在static（plugins里面配置的目录）里的shell.html了
<img src="https://i.imgur.com/q2eYEVP.png" alt=""></li></ul> <p>最后将项目打包，运行起来，就能看到对应的skeleton-page了
<img src="https://i.imgur.com/gDgaDn0.gif" alt="">
还有更多的参数配置，请参考仓库地址<a href="https://github.com/ElemeFE/page-skeleton-webpack-plugin" title="page-skeleton-webpack-plugin" target="_blank" rel="noopener noreferrer">page-skeleton-webpack-plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>这里我还碰到了一个问题</strong>
就是运行插件式，系统提示windows找不到chrome
<img src="https://i.imgur.com/7K9fB9a.gif" alt=""> <img src="https://i.imgur.com/vPvSfWd.png" alt="">
再使用Puppeteer的demo排除了生成skeleton界面的问题后
在inssue里跟大神交流后
知道插件用到了一个叫<a href="https://github.com/sindresorhus/opn" target="_blank" rel="noopener noreferrer">opn<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的库来打开chrome
这里提到了不同环境下的app名字是不一样的
<code>app</code> <code>Type: string Array</code> <code>Specify the app to open the target with, or an array with the app and app arguments.</code> <code>The app name is platform dependent. Don't hard code it in reusable modules. For example, Chrome is google chrome on macOS, google-chrome on Linux and chrome on Windows.</code>
所以在不同的环境下启动，需要寻找对应的名字
找到问题，大神给出了解决方案
在node_modules/page-skeleton-webpack-plugin/src/server.js</p> <div class="language- extra-class"><pre><code>//修改前
open({this.previewPageUrl, app: google chrome})
//修改后
open(this.previewPageUrl, {
  app: ['chrome', '--incognito']
})
</code></pre></div><p>这样系统就能顺利的找到chrome，完成生成页面后的操作了！</p> <p>但是这里我又有个问题了，如果用户通过不同的链接进入项目，那么每个地址都会显示这个固定的骨架屏，</p> <h4 id="如何才能为不同的页面-配置不同的骨架屏呢"><a href="#如何才能为不同的页面-配置不同的骨架屏呢" class="header-anchor">#</a> 如何才能为不同的页面，配置不同的骨架屏呢</h4> <p>这里我找到了另外一个库<a href="https://github.com/lavas-project/vue-skeleton-webpack-plugin" target="_blank" rel="noopener noreferrer">vue-skeleton-webpack-plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，是需要手动编写skeleton-page，但是可以配置多页面对应多骨架屏</p> <ul><li>配置篇</li></ul> <p>首先需要安装对应的插件</p> <blockquote><p>npm install vue-skeleton-webpack-plugin</p></blockquote> <p>插件在dev可以配置预览的路由，在prod环境下使用</p> <ol><li><p>在webpack.prod.conf.js中引入插件</p> <div class="language- extra-class"><pre><code> // 引入插件
 const SkeletonWebpackPlugin = require('vue-skeleton-webpack-plugin')
 // plugin里添加配置
 plugins: [
 	new SkeletonWebpackPlugin({
       webpackConfig: require('./webpack.skeleton.conf'), // skeleton配置文件
       router: {
         routes: [  // path是对应的路由，skeletonId是对应骨架屏的id（在后面的entry-skeleton.ts中可以看到）
           {path: '/index', skeletonId: 'skeleton2'}, 
           {path: '/', skeletonId: 'skeleton1'}
         ]
       }
     }),
 ]
</code></pre></div></li> <li><p>同级目录下的webpack.skeleton.conf.js配置文件</p> <div class="language- extra-class"><pre><code> 'use strict';

 const webpack = require('webpack');
 const config = require('../config');
 const path = require('path')
 const merge = require('webpack-merge')
 const baseWebpackConfig = require('./webpack.base.conf')
 const nodeExternals = require('webpack-node-externals')
 const OptimizeCSSPlugin = require('optimize-css-assets-webpack-plugin')
 
 function resolve(dir) {
   return path.join(__dirname, dir)
 }
 
 module.exports = merge(baseWebpackConfig, {
   target: 'node',
   devtool: false,
   entry: {
     app: resolve('../src/entry-skeleton.ts') // skeleton入口文件
   },
   output: Object.assign({}, baseWebpackConfig.output, {
       filename: 'skeleton-bundle.js',
       libraryTarget: 'commonjs2'
   }),
   externals: nodeExternals({
     whitelist: /\.css$/
   }),
   plugins: [
     new webpack.DefinePlugin({
         'process.env': config.build.env
     }),
 
     // Compress extracted CSS. We are using this plugin so that possible
     // duplicated CSS from different components can be deduped.
     new OptimizeCSSPlugin({
         cssProcessorOptions: {
             safe: true
         }
     })
   ]
 })
</code></pre></div></li> <li><p>../src/entry-skeleton.ts入口文件</p> <div class="language- extra-class"><pre><code> import Vue from 'vue';
 import Skeleton1 from './skeleton/HomeSkeleton.vue'; // 事先写好的skeleton-page页面
 import Skeleton2 from './skeleton/HomeSkeleton2.vue';
 
 export default new Vue({
     components: {
         Skeleton1,  // 注册对应的组件
         Skeleton2
     },
     template: `
       &lt;div&gt;  // 这里对应的id就是plugins里面不同页面对应的skeletonId
         &lt;skeleton1 id=&quot;skeleton1&quot; style=&quot;display:none&quot; /&gt;
         &lt;skeleton2 id=&quot;skeleton2&quot; style=&quot;display:none&quot; /&gt;
       &lt;/div&gt;
     `
 });
</code></pre></div></li></ol> <p>效果图
/index 对应的 id skeleton2
<img src="https://i.imgur.com/VABboqs.gif" alt="">
/      对应的 id skeleton1
<img src="https://i.imgur.com/HSryVBj.gif" alt="">
更多的配置参考仓库地址 <a href="https://github.com/lavas-project/vue-skeleton-webpack-plugin" target="_blank" rel="noopener noreferrer">vue-skeleton-webpack-plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
这样，就能实现多页对应多个skeleton-page了
再结合前面的自动生成skeleton-page是不是算半自动花了，- -笑哭
有心之人可以结合两个插件，全自动多页对应多skeleton-page指日可待了！</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5d71a1c6.js" defer></script><script src="/assets/js/2.c183a324.js" defer></script><script src="/assets/js/26.69d37c61.js" defer></script>
  </body>
</html>
